## 特殊的索引和集合
本章介绍一些特殊的集合和索引类型：包括
+ 用于类队列数据的固定集合(capped collection)
+ 用于缓存的TTL索引
+ 用于简单字符串搜索的全文本索引
+ 用于二维平面和球体空间的地理空间索引
+ 用于存储大文件的GridFS

### 5.1 固定索引
mongo中的普通集合是动态创建的，而且可以自动增长以容纳更多的数据。mongo中还有另一种不同类型的集合，叫做固定集合，固定集合
需要事先创建好，而且它的大小是固定的。固定集合的行为类似于循环队列。如果已经没有空间了， 最老的文档会被删除以释放空间，
新插入的文档会占据这块空间。
`固定集合创建好后就不能改变了，只能删除后重建`。
```
// 创建一个大小为100000个字节的固定集合，它最多保存100个文档。
db.createCollection({"collection", {"capped":true, "size":100000, "max":100}})
```
#### 5.1.2 自然排序  
因为固定集合上的插入是有顺序的，它返回结果集中文档的顺序就是文档在磁盘上的顺序。它得到的文档从旧到新，当然也可以从新到旧
```
db.colleciton.find().sort({"natural":-1})
```

#### 5.1.3 循环游标tailable cursor  
一种特殊的游标，当循环游标的结果集被取光后，游标不会关闭。因此当新的文档插入到集合中时，循环游标会取到结果。由于普通集合并不
维护文档的插入顺序，所以循环游标只能用在固定集合上。

#### 5.1.4 没有_id索引的集合
默认情况下，每个集合都有一个_id索引，可以调用createCollection创建集合的时候指定autoIndex为false,这样创建集合的时候就不会
自动在_id上创建索引。`实践中不推荐`。如果创建了一个没有_id索引的集合，那么就不能复制它所在的mongo了。复制操作要求每个集合
上都要有_id索引。

### 5.2 TTL索引 time-to-live index
这种索引允许给每一个文档设置一个超时时间。一个文档到达预设置的时间后就会被删除。
```
// 超时时间24小时，取lastUpdate的更新时间，如果频繁更新，则以最近更新的时间为准。
db.foo.ensureIndex({"lastUpdate":1},{"expireAfterSecs":60*60*24})
```
TTL索引每分钟进行一次清理，所以不应该以来以秒为单位的时间保证索引的存货状态。

### 5.3 全文本索引
用于在文档中搜索文本。使用全文本索引可以非常快地进行文本搜索，就如同内置了多种语言分词机制的支持一样。
创建任何一种索引的开销都比较大，而创建全文本索引的成本更高。在一个操作频繁的集合上创建全文本索引可能会导致mongodb过载。

### 5.4 地理空间索引/2D索引
...
### 5.5 GridFS入门


